# çƒ­ç‚¹è®°å¿† - ç¤¾ä¼šäº‹ä»¶è¿½è¸ªåº”ç”¨ (Neon PostgreSQL + Cloudflare Pages)

ä¸€ä¸ªåŸºäºç°ä»£WebæŠ€æœ¯æ ˆçš„ç¤¾ä¼šçƒ­ç‚¹äº‹ä»¶è¿½è¸ªç³»ç»Ÿï¼Œä¸“æ³¨äºè®°å½•å’Œåˆ†æåƒ"é»„æ¨è€³ç¯"ã€"å“ˆä½›è’‹"ã€"åå’Œè‘£"ã€"æ­¦å¤§æ¨æ™¯åª›"ç­‰å¼•èµ·ç¤¾ä¼šå¹¿æ³›å…³æ³¨çš„äº‹ä»¶ï¼Œæä¾›æ¸…æ™°çš„äº‹ä»¶è„‰ç»œå’Œå‰å› åæœåˆ†æã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹ç‚¹

### ğŸ”¥ çƒ­ç‚¹äº‹ä»¶èšç„¦
- **æ™ºèƒ½çƒ­ç‚¹è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«å’Œè·Ÿè¸ªç¤¾ä¼šçƒ­ç‚¹äº‹ä»¶
- **äº‹ä»¶è„‰ç»œåˆ†æ**: æ¸…æ™°å±•ç¤ºäº‹ä»¶çš„å‰å› åæœå’Œå‘å±•è„‰ç»œ  
- **å…³é”®äººç‰©è¿½è¸ª**: é‡ç‚¹å…³æ³¨äº‹ä»¶ä¸­çš„å…³é”®äººç‰©å’Œæœºæ„
- **æ—¶é—´çº¿è¿˜åŸ**: å®Œæ•´è¿˜åŸäº‹ä»¶å‘å±•çš„æ—¶é—´é¡ºåº

### ğŸ“… æŒ‰æ—¥æœŸæ£€ç´¢
- **æ—¥æœŸç²¾ç¡®æœç´¢**: æ”¯æŒæŒ‰å…·ä½“æ—¥æœŸæŸ¥æ‰¾ç›¸å…³äº‹ä»¶
- **æ—¥æœŸèŒƒå›´æŸ¥è¯¢**: å¯æŸ¥è¯¢æŒ‡å®šæ—¶é—´æ®µå†…çš„æ‰€æœ‰äº‹ä»¶
- **æœˆåº¦æ—¥å†è§†å›¾**: ä»¥æ—¥å†å½¢å¼å±•ç¤ºæ¯æœˆçš„äº‹ä»¶åˆ†å¸ƒ
- **æ—¶é—´ç»Ÿè®¡åˆ†æ**: æŒ‰æ—¥æœŸã€æœˆä»½ç»Ÿè®¡äº‹ä»¶æ•°é‡å’Œç±»å‹

### ğŸ¤– æ™ºèƒ½æ•°æ®å±•ç¤º
- **å®æ—¶äº‹ä»¶å±•ç¤º**: å±•ç¤ºé‡è¦ç¤¾ä¼šäº‹ä»¶åŠå…¶å‘å±•è„‰ç»œ
- **åˆ†ç±»æµè§ˆ**: æŒ‰ç§‘æŠ€ã€ç¯å¢ƒã€ç»æµç­‰ç±»åˆ«ç»„ç»‡äº‹ä»¶
- **æœç´¢åŠŸèƒ½**: æ”¯æŒå…³é”®è¯ã€åˆ†ç±»å’Œé‡è¦æ€§ç­›é€‰
- **é‡è¦æ€§æ’åº**: æ ¹æ®ç¤¾ä¼šå½±å“åŠ›å’Œå…³æ³¨åº¦æ’åº

### âš¡ é«˜æ€§èƒ½æ¶æ„
- **Neon PostgreSQL**: ç°ä»£åŒ–äº‘æ•°æ®åº“ï¼Œé«˜å¯ç”¨æ€§
- **Cloudflare Pages**: å…¨çƒCDNåŠ é€Ÿï¼Œè¾¹ç¼˜è®¡ç®—
- **Express.js API**: é«˜æ•ˆçš„RESTful APIæ¥å£
- **Prisma ORM**: ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ

## ğŸš€ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18** + TypeScript - ç°ä»£åŒ–ç”¨æˆ·ç•Œé¢
- **Tailwind CSS** - ç¾è§‚å“åº”å¼è®¾è®¡  
- **React Router** - å•é¡µåº”ç”¨è·¯ç”±
- **Axios** - HTTPè¯·æ±‚å¤„ç†
- **Vite** - ç°ä»£æ„å»ºå·¥å…·

### åç«¯æŠ€æœ¯æ ˆ
- **Node.js + Express** - é«˜æ€§èƒ½æœåŠ¡å™¨
- **Neon PostgreSQL** - ç°ä»£åŒ–PostgreSQLæ•°æ®åº“
- **Prisma ORM** - ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
- **TypeScript** - ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
- **æ™ºèƒ½çˆ¬è™«ç³»ç»Ÿ** - è‡ªåŠ¨æ”¶é›†çƒ­ç‚¹äº‹ä»¶

### éƒ¨ç½²æ¶æ„
- **Cloudflare Pages** - é™æ€èµ„æºæ‰˜ç®¡
- **Neon Database** - åˆ†å¸ƒå¼PostgreSQLæ•°æ®åº“
- **GitHubé›†æˆ** - è‡ªåŠ¨CI/CDéƒ¨ç½²
- **å…¨çƒCDN** - æé€Ÿè®¿é—®ä½“éªŒ

## ğŸ“ é¡¹ç›®ç»“æ„

```
hotgone/
â”œâ”€â”€ backend/                  # Node.jsåç«¯API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹ (Prisma)
â”‚   â”‚   â”‚   â””â”€â”€ Event.ts     # äº‹ä»¶æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/          # APIè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ events.ts    # äº‹ä»¶ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ services/        # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ crawler.ts   # çƒ­ç‚¹äº‹ä»¶çˆ¬è™«
â”‚   â”‚   â”‚   â”œâ”€â”€ eventTimeline.ts # äº‹ä»¶è„‰ç»œåˆ†æ
â”‚   â”‚   â”‚   â””â”€â”€ updater.ts   # äº‹ä»¶æ›´æ–°æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ lib/             # å·¥å…·åº“
â”‚   â”‚   â”‚   â””â”€â”€ database.ts  # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â””â”€â”€ server.ts        # æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma    # æ•°æ®åº“æ¶æ„
â”‚   â”œâ”€â”€ test-db.js          # æ•°æ®åº“æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â””â”€â”€ types/          # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ dist/               # æ„å»ºè¾“å‡ºç›®å½•
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ functions/              # Cloudflare Pages Functions
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ [[route]].js    # APIè·¯ç”±å¤„ç†
â”œâ”€â”€ start-dev.sh/.bat      # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”œâ”€â”€ validate-setup.sh      # é¡¹ç›®è®¾ç½®éªŒè¯è„šæœ¬
â”œâ”€â”€ wrangler.toml          # Cloudflareé…ç½®
â””â”€â”€ README.md
```

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. çƒ­ç‚¹äº‹ä»¶è¿½è¸ª
- è‡ªåŠ¨è¯†åˆ«ç¤¾ä¼šçƒ­ç‚¹äº‹ä»¶ (é»„æ¨è€³ç¯ã€å“ˆä½›è’‹ã€åå’Œè‘£ã€æ­¦å¤§æ¨æ™¯åª›ç­‰)
- æ™ºèƒ½å…³é”®è¯åŒ¹é…å’Œé‡è¦æ€§è¯„åˆ†
- äº‹ä»¶è„‰ç»œåˆ†æå’Œå‰å› åæœæ¢³ç†
- ç›¸å…³äº‹ä»¶å…³è”å’Œæ¨è

### 2. æ—¥æœŸæ£€ç´¢ç³»ç»Ÿ
- æŒ‰å…·ä½“æ—¥æœŸæŸ¥æ‰¾äº‹ä»¶: `GET /api/events/by-date/2024-08-03`
- æ—¥æœŸèŒƒå›´æŸ¥è¯¢: `GET /api/events/date-range?startDate=2024-08-01&endDate=2024-08-03`
- æœˆåº¦æ—¥å†è§†å›¾: `GET /api/events/calendar/2024/8`
- æ—¥æœŸç»Ÿè®¡åˆ†æ

### 3. äº‹ä»¶è¯¦æƒ…å±•ç¤º
- å®Œæ•´çš„äº‹ä»¶æè¿°å’ŒèƒŒæ™¯ä¿¡æ¯
- è¯¦ç»†çš„å‘å±•æ—¶é—´çº¿
- ç›¸å…³å…³é”®è¯å’Œæ¥æºé“¾æ¥
- ç§»åŠ¨ç«¯ä¼˜åŒ–çš„é˜…è¯»ä½“éªŒ

### 4. æ™ºèƒ½æœç´¢
- å…¨æ–‡æœç´¢æ”¯æŒ
- æŒ‰åˆ†ç±»ã€é‡è¦æ€§ç­›é€‰
- å®æ—¶æœç´¢å»ºè®®
- ç›¸å…³äº‹ä»¶æ¨è

## ğŸ›  æœ¬åœ°å¼€å‘

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- Git
- Neon PostgreSQLè´¦å· (å…è´¹)

### å¿«é€Ÿå¼€å§‹

1. **é¡¹ç›®è®¾ç½®éªŒè¯**
```bash
git clone <repository_url>
cd hotgone
./validate-setup.sh  # æˆ–åœ¨Windowsä¸Šè¿è¡Œ validate-setup.bat
```

2. **ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ**
```bash
# Linux/Mac
./start-dev.sh

# Windows
start-dev.bat
```

3. **æ‰‹åŠ¨å¯åŠ¨ (å¯é€‰)**
```bash
# åç«¯ (ç«¯å£ 3001)
cd backend
npm install
npm run setup      # å®‰è£…ä¾èµ– + ç”ŸæˆPrismaå®¢æˆ·ç«¯ + æµ‹è¯•æ•°æ®åº“
npm run dev

# å‰ç«¯ (ç«¯å£ 5173)  
cd frontend
npm install --legacy-peer-deps
npm run dev
```

### æ•°æ®åº“è®¾ç½®

1. **åˆ›å»ºNeonæ•°æ®åº“**
   - è®¿é—® [neon.tech](https://neon.tech) å¹¶åˆ›å»ºè´¦å·
   - åˆ›å»ºæ–°çš„PostgreSQLé¡¹ç›®
   - å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# ç¼–è¾‘ backend/.env
DATABASE_URL="postgresql://username:password@ep-xxx.us-east-1.aws.neon.tech/dbname?sslmode=require"
```

3. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
cd backend
npx prisma db push    # æ¨é€æ¶æ„åˆ°æ•°æ®åº“
npm run test         # æµ‹è¯•æ•°æ®åº“è¿æ¥
```

## ğŸ“– APIæ–‡æ¡£

### äº‹ä»¶ç®¡ç†
```bash
GET /api/events                     # è·å–äº‹ä»¶åˆ—è¡¨ (æ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åº)
GET /api/events/:id                 # è·å–äº‹ä»¶è¯¦æƒ…
POST /api/events                    # åˆ›å»ºæ–°äº‹ä»¶
PUT /api/events/:id                 # æ›´æ–°äº‹ä»¶
```

### æ—¥æœŸæœç´¢ ğŸ†•
```bash
GET /api/events/by-date/2024-08-03  # è·å–ç‰¹å®šæ—¥æœŸçš„äº‹ä»¶
GET /api/events/date-range?startDate=2024-08-01&endDate=2024-08-03  # æ—¥æœŸèŒƒå›´æŸ¥è¯¢
GET /api/events/calendar/2024/8     # æœˆåº¦æ—¥å†è§†å›¾
```

### çƒ­ç‚¹äº‹ä»¶
```bash
GET /api/events/hot/ranking         # çƒ­ç‚¹äº‹ä»¶æ¦œå•
GET /api/events/search?q=keyword    # æœç´¢äº‹ä»¶
```

### äº‹ä»¶åˆ†æ
```bash
GET /api/events/:id/context         # äº‹ä»¶è„‰ç»œåˆ†æ
GET /api/events/:id/summary         # äº‹ä»¶æ‘˜è¦æŠ¥å‘Š
GET /api/events/:id/related         # ç›¸å…³äº‹ä»¶
```

### çˆ¬è™«å’Œæ›´æ–°
```bash
POST /api/crawl/trigger             # æ‰‹åŠ¨è§¦å‘çˆ¬è™«
GET /api/cron/crawl                 # Cronä»»åŠ¡ç«¯ç‚¹
```

### ç³»ç»Ÿç›‘æ§
```bash
GET /api/health                     # å¥åº·æ£€æŸ¥
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### 1. Neonæ•°æ®åº“éƒ¨ç½²
```bash
# è¯¦ç»†è¯´æ˜è§ backend/NEON-SETUP.md
1. åˆ›å»ºNeonè´¦å·å’Œæ•°æ®åº“
2. é…ç½®è¿æ¥å­—ç¬¦ä¸²
3. æ¨é€æ•°æ®åº“æ¶æ„
4. æµ‹è¯•è¿æ¥
```

### 2. Cloudflare Pageséƒ¨ç½²
```bash
# è¯¦ç»†è¯´æ˜è§ CLOUDFLARE-DEPLOYMENT.md
1. è¿æ¥GitHubä»“åº“åˆ°Cloudflare Pages
2. è®¾ç½®æ„å»ºé…ç½®
3. é…ç½®ç¯å¢ƒå˜é‡
4. è‡ªåŠ¨éƒ¨ç½²
```

### 3. æœ¬åœ°è°ƒè¯•
```bash
# ä½¿ç”¨wrangleræœ¬åœ°è°ƒè¯•
npm install -g wrangler
wrangler pages dev frontend/dist --port 8080
```

## ğŸ—„ æ•°æ®åº“æ¶æ„

### æ ¸å¿ƒè¡¨ç»“æ„ (PostgreSQL + Prisma)

**Event è¡¨**
```sql
model Event {
  id          String   @id @default(cuid())
  title       String
  description String
  category    String
  status      EventStatus @default(ACTIVE)
  importance  Int      @default(1)
  keywords    String[]
  sources     String[]
  timeline    Timeline[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

**Timeline è¡¨**
```sql
model Timeline {
  id       String   @id @default(cuid())
  eventId  String
  date     DateTime
  title    String
  content  String
  source   String?
  type     TimelineType
  event    Event    @relation(fields: [eventId], references: [id])
}
```

### çƒ­ç‚¹äº‹ä»¶ç¤ºä¾‹æ•°æ®
- é»„æ¨è€³ç¯äº‹ä»¶ - ç½‘ç»œçƒ­è®®è¯é¢˜
- å“ˆä½›è’‹äº‹ä»¶ - æ•™è‚²å…¬å¹³è®¨è®º  
- åå’Œè‘£äº‹ä»¶ - åŒ»ç–—è¡Œä¸šå…³æ³¨
- æ­¦å¤§æ¨æ™¯åª›äº‹ä»¶ - æ ¡å›­æ–‡åŒ–ç°è±¡
- è‘£å®‡è¾‰ä¸ä¸œæ–¹ç”„é€‰ - å•†ä¸šæ¨¡å¼å˜é©

## ğŸ”§ å¼€å‘å·¥å…·å’Œè„šæœ¬

### ä¾¿æ·è„šæœ¬
```bash
./start-dev.sh          # ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ
./validate-setup.sh     # é¡¹ç›®è®¾ç½®éªŒè¯
npm run setup           # åç«¯å®Œæ•´è®¾ç½®
npm run test            # æ•°æ®åº“è¿æ¥æµ‹è¯•
```

### æ•°æ®åº“å·¥å…·
```bash
npx prisma studio       # å¯è§†åŒ–æ•°æ®åº“ç®¡ç†
npx prisma db push      # æ¨é€æ¶æ„æ›´æ”¹
npx prisma generate     # ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç 
```

## ğŸ“± ç‰¹è‰²åŠŸèƒ½

### ğŸ”¥ çƒ­ç‚¹äº‹ä»¶æ™ºèƒ½è¯†åˆ«
ç³»ç»Ÿä¸“é—¨é’ˆå¯¹ç¤¾ä¼šçƒ­ç‚¹äº‹ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œèƒ½å¤Ÿè¯†åˆ«å’Œè·Ÿè¸ªï¼š
- ç½‘ç»œçƒ­è®®è¯é¢˜ (é»„æ¨è€³ç¯ã€å“ˆä½›è’‹ç­‰)
- æ•™è‚²ç¤¾ä¼šäº‹ä»¶ (åå’Œè‘£ã€æ­¦å¤§æ¨æ™¯åª›ç­‰)  
- å•†ä¸šæ–‡åŒ–ç°è±¡ (è‘£å®‡è¾‰ã€ä¸œæ–¹ç”„é€‰ç­‰)
- åŠæ—¶çš„è„‰ç»œåˆ†æå’Œå‰å› åæœæ¢³ç†

### ğŸ“… å¼ºå¤§çš„æ—¥æœŸæ£€ç´¢
- ç²¾ç¡®åˆ°æ—¥çš„äº‹ä»¶æŸ¥è¯¢
- çµæ´»çš„æ—¥æœŸèŒƒå›´ç­›é€‰
- ç›´è§‚çš„æœˆåº¦æ—¥å†è§†å›¾
- è¯¦ç»†çš„æ—¶é—´ç»Ÿè®¡åˆ†æ

### ğŸ§  æ™ºèƒ½äº‹ä»¶åˆ†æ
- è‡ªåŠ¨æå–äº‹ä»¶å…³é”®ä¿¡æ¯
- æ™ºèƒ½å…³è”ç›¸å…³äº‹ä»¶
- é‡è¦æ€§è‡ªåŠ¨è¯„åˆ†
- å‘å±•è„‰ç»œæ™ºèƒ½åˆ†æ

## ğŸŒ åœ¨çº¿è®¿é—®

- **ç”Ÿäº§ç¯å¢ƒ**: å¾…éƒ¨ç½²
- **GitHubä»“åº“**: [https://github.com/your-username/hotgone](https://github.com/your-username/hotgone)

---

**æ„å»ºçŠ¶æ€**: [![Cloudflare Pages](https://img.shields.io/badge/Cloudflare-Pages-orange)](https://pages.cloudflare.com)
**æ•°æ®åº“**: [![Neon](https://img.shields.io/badge/Neon-PostgreSQL-green)](https://neon.tech)
**æ¡†æ¶**: [![React](https://img.shields.io/badge/React-18-blue)](https://reactjs.org) [![Node.js](https://img.shields.io/badge/Node.js-18+-green)](https://nodejs.org) 
